<!DOCTYPE html>
<html>

<% include ../views/templates/head %>

<!-- onload="initFeed()" -->
<body class="bg-info" onload="initFeed()">
  <h1><%= title %></h1>
  <main class="p-2">
    <div id="posts" class="container-fluid">
      <div id="loader" class="text-center text-light" style="margin-top:10rem;">
        <i class="fas fa-spinner fa-2x fa-pulse"></i>
        <p>Loading Messages</p>
      </div>
    </div>
  </main>

  <div class="container-fluid fixed-bottom">
    <div id="toolbar" class="row bg-dark">
      <div class="col p-2 d-flex">

        <button data-toggle="modal" data-target="#viewfinder" id="camera"
          class="fas fa-camera fa-lg px-3 mr-2 text-light border-light bg-dark rounded-circle"></button>
        <textarea id="caption" placeholder="Image Caption..." style="resize:none;" maxlength="120"
          class="flex-grow-1 w-100 rounded border-light align-middle pr-5"></textarea>
        <a id="send" style="right:1.25rem; bottom:1.25rem; padding: 1rem;"
          class="fas fa-paper-plane fa-lg position-absolute text-white"></a>

      </div>
    </div>
  </div>

  <!-- Camera Modal -->
  <div id="viewfinder" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog fixed-bottom" role="document">
      <div class="modal-content bg-dark">
        <div class="modal-body p-1 text-center">

          <video id="player" autoplay class="w-100 rounded"></video>
          <button data-dismiss="modal" type="button" id="shutter"
            class="fas fa-circle fa-3x rounded-circle bg-white text-danger p-1 my-2"></button>

        </div>
      </div>
    </div>
  </div>

  <!-- Photo Modal -->
  <div class="modal fade" id="photoframe" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-body p-1">
          <img src="" class="w-100 rounded" data-dismiss="modal">
        </div>
      </div>
    </div>
  </div>
</body>

<script>
    if ('mediaDevices' in navigator) {
        initFeed();
    }
</script>

</html>
